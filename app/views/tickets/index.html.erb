<h2>Tickets</h2>

<table class="table table-striped table-sm">
  <thead>
  <tr>
    <th><%= Ticket.human_attribute_name(:id) %></th>
    <th><%= Ticket.human_attribute_name(:title) %></th>
    <th><%= Ticket.human_attribute_name(:status) %></th>
    <th><%= Ticket.human_attribute_name(:priority) %></th>
    <th><%= Ticket.human_attribute_name(:assignee) %></th>
    <th><%= Ticket.human_attribute_name(:tags) %></th>
  </tr>
  </thead>

  <tbody>
  <% @tickets.each do |ticket| %>
    <tr>
      <td>
        <%= link_to ticket.identifier, ticket %>
        <%= if ticket.flagged?; "ðŸš©"; end %>
      </td>
      <td><%= ticket.title %></td>
      <td><%= status_label(ticket) %></td>
      <td><%= priority_label(ticket) %></td>
      <td>
        <% if ticket.assignee.present? %>
          <%= gravatar_icon ticket.assignee %>
          <%= ticket.assignee.name %>
        <% else %>
          ---
        <% end %>
      </td>
      <td>
        <% for tag in ticket.tags %>
          <span class="badge rounded-pill bg-secondary">
          <% if tag.is_board %>
            ðŸ“‹ 
            <%= link_to tag.name, board_path(tag) %>
          <% elsif tag.is_area %>
            ðŸ“—
            <%= link_to tag.name, tag_path(tag) %>
          <% else %>
            <%= link_to tag.name, tag_path(tag) %>
          <% end %>
          </span>
        <% end %>
      </td>
    </tr>
  <% end %>
  </tbody>
</table>

<%= paginate @tickets, theme: 'bootstrap-5' %>